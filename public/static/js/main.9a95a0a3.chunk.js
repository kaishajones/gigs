(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{39:function(e,t,a){e.exports=a(69)},44:function(e,t,a){},45:function(e,t,a){},69:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(13),o=a.n(c),l=(a(44),a(45),a(9)),s=a(2),i=a(10),m=a(4),u=a(5),d=a(6),h=a(7),p=a(19),f=a(24),g=a(11),E=a.n(g),b="http://localhost:3001",v=function(){var e=localStorage.getItem("accessToken"),t=localStorage.getItem("userId"),a={Authorization:"Bearer ".concat(e)};return E.a.get("".concat(b,"/api/v1/users/").concat(t),{headers:a}).then((function(e){return e.data})).catch((function(e){return console.log(e)}))},N=function(){return localStorage.getItem("accessToken")&&localStorage.getItem("accessToken-expiration")>Date.now()},y=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(e){return Object(m.a)(this,a),t.call(this,e)}return Object(u.a)(a,[{key:"render",value:function(){var e=this.props,t=e.comment,a=e.commenterPhoto,n=e.name;return r.a.createElement("div",{key:t.id},r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-body"},r.a.createElement("div",{className:"article-author"},r.a.createElement("div",null,r.a.createElement("img",{src:a,className:"comment-round-image"})),r.a.createElement("div",{className:"title-author"},r.a.createElement("h6",{className:"card-subtitle mb-2 text-muted"},n),t.content)))),r.a.createElement("br",null))}}]),a}(n.Component),C=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(){var e;return Object(m.a)(this,a),(e=t.call(this)).displayArticles=function(){localStorage.getItem("userId");(function(e){var t=localStorage.getItem("accessToken"),a=localStorage.getItem("userId"),n={headers:{Authorization:"Bearer ".concat(t)}};return E.a.get("".concat(b,"/api/v1/users/").concat(a,"/articles"),n).then((function(e){return e.data})).catch((function(e){return console.log(e)}))})().then((function(t){e.setState({articles:t})})).catch((function(e){return console.log("User Not Authenticated")}))},e.handleInputChange=function(t){e.setState(Object(i.a)({},t.target.name,t.target.value))},e.handleCreateArticle=function(t){t.preventDefault(),function(e){var t=localStorage.getItem("accessToken"),a=localStorage.getItem("userId"),n={Authorization:"Bearer ".concat(t)};return E.a.post("".concat(b,"/api/v1/users/").concat(a,"/articles"),e,{headers:n}).then((function(e){return console.log(e.data,"new article"),e.data})).catch((function(e){return console.log(e)}))}({title:e.state.title,content:e.state.content}).then((function(t){e.displayArticles(),e.setState({title:"",content:""})})).catch((function(e){return console.log("User Not Authenticated")}))},e.handleCommentInput=function(t,a){t.preventDefault(),e.setState({showCommentBox:Object(i.a)({},a,!e.state.showCommentBox[a])})},e.handleHideCommentBox=function(t,a){t.preventDefault(),e.setState({showCommentBox:Object(i.a)({},a,!e.state.showCommentBox[a])})},e.handleShowComment=function(t,a){t.preventDefault(),e.setState({showComments:Object(i.a)({},a,!e.state.showComments[a])})},e.handleHideComment=function(t,a){t.preventDefault(),e.setState({showComments:Object(i.a)({},a,!e.state.showComments[a])})},e.handleCreateComment=function(t,a){a.preventDefault();var n={content:e.state.commentContent};(function(e,t){var a=localStorage.getItem("accessToken"),n=localStorage.getItem("userId"),r={Authorization:"Bearer ".concat(a)};return E.a.post("".concat(b,"/api/v1/users/").concat(n,"/articles/").concat(e,"/comments"),t,{headers:r}).then((function(e){return console.log(e.data,"new comment"),e.data})).catch((function(e){return console.log(e)}))})(t,n).then((function(a){e.displayArticles(),e.setState({showCommentBox:Object(i.a)({},t,!e.state.showCommentBox[t]),commentContent:""})})).catch((function(e){return console.log("User Not Authenticated")}))},e.handleEditArticle=function(t,a){t.preventDefault(),function(e,t){var a=localStorage.getItem("accessToken"),n=localStorage.getItem("userId"),r={Authorization:"Bearer ".concat(a)};return E.a.put("".concat(b,"/api/v1/users/").concat(n,"/articles/").concat(e),t,{headers:r}).then((function(e){return console.log(e.data),e.data})).catch((function(e){return console.log(e)}))}(a,{title:e.state.title,content:e.state.content}).then((function(t){e.displayArticles(),e.setState({isEditing:!1,title:"",content:""})})).catch((function(e){return console.log("User Not Authenticated")}))},e.handleShowArticle=function(t,a){e.setState({isEditing:!0}),a.preventDefault(),function(e){var t=localStorage.getItem("accessToken"),a=localStorage.getItem("userId"),n={Authorization:"Bearer ".concat(t)};return E.a.get("".concat(b,"/api/v1/users/").concat(a,"/articles/").concat(e),{headers:n}).then((function(e){return e.data})).catch((function(e){return console.log(e)}))}(t).then((function(t){console.log(t,"article"),e.displayArticles(),e.setState({title:t.title,content:t.content,articleId:t.id,isEditing:!0})})).catch((function(e){return console.log("User Not Authenticated")}))},e.handleDeleteArticle=function(t,a){a.preventDefault(),function(e){var t=localStorage.getItem("accessToken"),a=localStorage.getItem("userId"),n={Authorization:"Bearer ".concat(t)};return E.a.delete("".concat(b,"/api/v1/users/").concat(a,"/articles/").concat(e),{headers:n}).then((function(e){return e.data})).catch((function(e){return console.log(e)}))}(t).then((function(t){e.displayArticles()})).catch((function(e){return console.log("User Not Authenticated")}))},e.state={articles:[],title:"",content:"",commentContent:"",showComments:{},isEditing:!1,articleId:void 0,showCommentBox:{}},e}return Object(u.a)(a,[{key:"componentDidMount",value:function(){this.displayArticles()}},{key:"render",value:function(){var e=this;if(!N())return r.a.createElement(s.a,{to:"/login"});var t=this.state.articles.sort((function(e,t){return e.id<t.id?1:-1}));return r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row",style:{marginTop:"2%"}},r.a.createElement("div",{className:"col"},r.a.createElement("form",{onSubmit:function(t){return e.state.isEditing?e.handleEditArticle(t,e.state.articleId):e.handleCreateArticle(t)}},r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"text",name:"title",value:this.state.title,className:"form-control",id:"exampleInputEmail1","aria-describedby":"emailHelp",placeholder:"Title",required:!0,onChange:this.handleInputChange})),r.a.createElement("div",{className:"form-group"},r.a.createElement("textarea",{className:"form-control",value:this.state.content,name:"content",id:"exampleFormControlTextarea1",placeholder:"Article content",rows:"3",required:!0,onChange:this.handleInputChange})),r.a.createElement("div",{className:"text-right"},this.state.isEditing?r.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Edit Article"):r.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Add Article"))))),r.a.createElement("hr",null),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col"},r.a.createElement("br",null),0===t.length&&r.a.createElement("h3",null,"No Articles to display!"),t.map((function(t){var a=t.user.firstname&&t.user.lastname?"".concat(t.user.firstname," ").concat(t.user.lastname):"User Name",n=t.user.profile_photo?t.user.profile_photo:"https://avatars2.githubusercontent.com/u/12019320?s=460&u=d0e2bdf1be105ea016322ed761da2e195a8d3217&v=4",c=t&&t.comments&&t.comments.length<=1?"".concat(t.comments.length," comment"):"".concat(t.comments.length," comments"),o=localStorage.getItem("userId")==t.user.id;return r.a.createElement("div",{key:t.id},r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-body"},r.a.createElement("div",{className:"card-top-styles"},r.a.createElement("div",{className:"article-author"},r.a.createElement("div",null,r.a.createElement("img",{src:n,className:"round-image"})),r.a.createElement("div",{className:"title-author"},r.a.createElement("h5",{className:"card-title"},t.title),r.a.createElement("h6",{className:"card-subtitle mb-2 text-muted"},a))),r.a.createElement("div",{className:"card-action-buttons"},o?r.a.createElement(r.a.Fragment,null,r.a.createElement(p.a,{onClick:function(a){return e.handleShowArticle(t.id,a)},style:{color:"#1DBC60",fontSize:"1.2rem"},className:"custom-card-link",icon:f.a}),"\xa0\xa0\xa0\xa0\xa0\xa0",r.a.createElement(p.a,{onClick:function(a){return window.confirm("Are you sure you want to delete this article?")&&e.handleDeleteArticle(t.id,a)},style:{color:"#ff0000",fontSize:"1.2rem"},className:"custom-card-link",icon:f.b})):null)),r.a.createElement("br",null),r.a.createElement("p",{className:"card-text"},t.content),e.state.showCommentBox[t.id]?r.a.createElement("form",{onSubmit:function(a){return e.handleCreateComment(t.id,a)}},r.a.createElement("div",{className:"form-group"},r.a.createElement("textarea",{className:"form-control",value:e.state.commentContent,name:"commentContent",id:"exampleFormControlTextarea1",placeholder:"Comment content",rows:"3",required:!0,onChange:e.handleInputChange})),r.a.createElement("div",{className:"text-right"},r.a.createElement("button",{onClick:function(a){return e.handleHideCommentBox(a,t.id)},className:"btn"},"Cancel"),r.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Add Comment"))):e.state.showComments[t.id]?r.a.createElement("span",null,r.a.createElement("hr",null),r.a.createElement("div",{className:"text-right"},r.a.createElement("a",{onClick:function(a){return e.handleHideComment(a,t.id)},className:"card-link custom-card-link"},"Hide comments")),r.a.createElement("br",null),r.a.createElement("div",{style:{width:"90%",marginLeft:"9.9%"}},t.comments.sort((function(e,t){return e.id<t.id?1:-1})).map((function(e){var t=e.user.profile_photo?e.user.profile_photo:"https://www.pngkey.com/png/full/115-1150420_avatar-png-pic-male-avatar-icon-png.png",a=e.user.firstname&&e.user.lastname?"".concat(e.user.firstname," ").concat(e.user.lastname):"Commentor Name";return r.a.createElement(y,{comment:e,commenterPhoto:t,name:a})})))):r.a.createElement("span",null,r.a.createElement("a",{onClick:function(a){return e.handleCommentInput(a,t.id)},className:"card-link custom-card-link"},"Add comment"),r.a.createElement("a",{onClick:function(a){return e.handleShowComment(a,t.id)},className:"card-link custom-card-link"},c)))),r.a.createElement("br",null))})))))}}]),a}(n.Component),w=a(12),I=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(){var e;return Object(m.a)(this,a),(e=t.call(this)).handleInputChange=function(t){e.setState(Object(i.a)({},t.target.name,t.target.value))},e.handleRegister=function(t){var a;e.props.history;t.preventDefault(),console.log(e.state,"state"),(a=e.state,E.a.post("".concat(b,"/api/v1/users"),{email:a.email,password:a.password}).then((function(e){return console.log(e.data)||e.data})).catch((function(e){return console.log(e)}))).then((function(t){return e.handleRedirect()})).catch((function(e){return alert(e)}))},e.handleRedirect=function(){w.b.info("User created successfully!"),e.props.history.push("/login")},e.state={email:"",password:""},e}return Object(u.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row justify-content-center align-items-center custom-class"},r.a.createElement("div",{className:"col-6"},r.a.createElement("h3",null,"Register"),r.a.createElement("hr",null),r.a.createElement("form",{className:"form-signin",onSubmit:this.handleRegister},r.a.createElement("div",{className:"form-label-group"},r.a.createElement("label",{htmlFor:"inputEmail"},"Email address"),r.a.createElement("input",{type:"email",id:"inputEmail",name:"email",className:"form-control",placeholder:"Email address",required:!0,autoFocus:!0,onChange:this.handleInputChange})),r.a.createElement("br",null),r.a.createElement("div",{className:"form-label-group"},r.a.createElement("label",{htmlFor:"inputPassword"},"Password"),r.a.createElement("input",{type:"password",id:"inputPassword",name:"password",className:"form-control",placeholder:"Password",required:!0,onChange:this.handleInputChange})),r.a.createElement("br",null),r.a.createElement("div",{className:"auth-links"},r.a.createElement("div",{style:{alignSelf:"center"}},"Already registered?\xa0",r.a.createElement(l.b,{to:"/login"},"Login")),r.a.createElement("div",null,r.a.createElement("button",{type:"submit",className:"btn btn-lg btn-primary btn-block"},"Register")))))))}}]),a}(n.Component),S=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).handleInputChange=function(e){n.setState(Object(i.a)({},e.target.name,e.target.value))},n.handleLogin=function(e){var t;e.preventDefault(),(t=n.state,E.a.post("".concat(b,"/api/v1/login"),{email:t.email,password:t.password}).then((function(e){return console.log(e.data),localStorage.setItem("accessToken",e.data.token),localStorage.setItem("userId",e.data.user.id),localStorage.setItem("accessToken-expiration",Date.now()+864e5),e.data})).catch((function(e){return console.log(e)}))).then((function(e){return n.handleRedirect()})).catch((function(e){return alert(e)}))},n.handleRedirect=function(){w.b.info("User logged in successfully!"),n.props.history.push("/")},n.state={name:"",password:""},n}return Object(u.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row justify-content-center align-items-center custom-class"},r.a.createElement("div",{className:"col-6"},r.a.createElement("h3",null,"Login"),r.a.createElement("hr",null),r.a.createElement("form",{className:"form-signin",onSubmit:this.handleLogin},r.a.createElement("div",{className:"form-label-group"},r.a.createElement("label",{htmlFor:"inputEmail"},"Email address"),r.a.createElement("input",{type:"email",id:"inputEmail",name:"email",className:"form-control",placeholder:"Email address",required:!0,autoFocus:!0,onChange:this.handleInputChange})),r.a.createElement("br",null),r.a.createElement("div",{className:"form-label-group"},r.a.createElement("label",{htmlFor:"inputPassword"},"Password"),r.a.createElement("input",{type:"password",id:"inputPassword",name:"password",className:"form-control",placeholder:"Password",required:!0,onChange:this.handleInputChange})),r.a.createElement("br",null),r.a.createElement("div",{className:"auth-links"},r.a.createElement("div",{style:{alignSelf:"center"}},"New member?\xa0",r.a.createElement(l.b,{to:"/register"},"Register")),r.a.createElement("div",null,r.a.createElement("button",{type:"submit",className:"btn btn-lg btn-primary btn-block"},"Login")))))))}}]),a}(n.Component),k=a(38),x=function(e){var t=e.component,a=(e.auth,Object(k.a)(e,["component","auth"]));return r.a.createElement(s.b,Object.assign({},a,{render:function(e){return N()?r.a.createElement(t,e):r.a.createElement(s.a,{to:"/login"})}}))},j=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(){var e;return Object(m.a)(this,a),(e=t.call(this)).handleInputChange=function(t){e.setState(Object(i.a)({},t.target.name,t.target.value))},e.showUserProfile=function(){v().then((function(t){e.setState({firstname:t.firstname||"",lastname:t.lastname||"",username:t.username||""})})).catch((function(e){return console.log("User Not Authenticated")}))},e.handleProfileUpdate=function(t){t.preventDefault(),function(e){var t=localStorage.getItem("accessToken"),a=localStorage.getItem("userId"),n={Authorization:"Bearer ".concat(t)};return E.a.put("".concat(b,"/api/v1/users/").concat(a),e,{headers:n}).then((function(e){return e.data})).catch((function(e){return console.log(e)}))}(e.state).then((function(t){return e.handleNotification()})).catch((function(e){return console.log("User Not Authenticated")}))},e.handleNotification=function(){e.showUserProfile(),w.b.info("User profile updated successfully!")},e.state={firstname:"",lastname:"",username:""},e}return Object(u.a)(a,[{key:"componentDidMount",value:function(){this.showUserProfile()}},{key:"render",value:function(){return r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col",style:{marginTop:"2%"}},r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-body"},r.a.createElement("h3",null,"Update Profile"),r.a.createElement("br",null),r.a.createElement("form",{onSubmit:this.handleProfileUpdate},r.a.createElement("div",{className:"form-group form-padding"},r.a.createElement("label",{htmlFor:"exampleInputEmail1"},"First Name"),r.a.createElement("input",{type:"text",name:"firstname",value:this.state.firstname,className:"form-control form-control-lg",id:"exampleInputEmail1","aria-describedby":"emailHelp",onChange:this.handleInputChange})),r.a.createElement("div",{className:"form-group form-padding"},r.a.createElement("label",{htmlFor:"exampleInputEmail1"},"Last Name"),r.a.createElement("input",{type:"text",name:"lastname",value:this.state.lastname,className:"form-control form-control-lg",id:"exampleInputEmail1","aria-describedby":"emailHelp",onChange:this.handleInputChange})),r.a.createElement("div",{className:"form-group form-padding"},r.a.createElement("label",{htmlFor:"exampleInputEmail1"},"User Name"),r.a.createElement("input",{type:"text",name:"username",value:this.state.username,className:"form-control form-control-lg",id:"exampleInputEmail1","aria-describedby":"emailHelp",onChange:this.handleInputChange})),r.a.createElement("div",{className:"text-right"},r.a.createElement("button",{type:"submit",className:"btn btn-primary btn-lg"},"Update Profile"))))))))}}]),a}(n.Component),O=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={firstname:"",lastname:"",username:"",photo:""},e.showUserProfile=function(){v().then((function(t){e.setState({firstname:t.firstname,lastname:t.lastname,username:t.username,photo:t.profile_photo})})).catch((function(e){return console.log("User Not Authenticated")}))},e.logOut=function(){var t=e.props.history;localStorage.clear(),t.push("/login")},e}return Object(u.a)(a,[{key:"componentDidMount",value:function(){N()&&this.showUserProfile()}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-light bg-light"},r.a.createElement(l.b,{exact:"true",to:"/",className:"navbar-brand"},"Gigs"),r.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation"},r.a.createElement("span",{className:"navbar-toggler-icon"})),r.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarSupportedContent"},r.a.createElement("ul",{className:"navbar-nav mr-auto"},N()?r.a.createElement("li",{className:"nav-item active"},r.a.createElement("a",{className:"nav-link",href:"/"},r.a.createElement("span",{className:"sr-only"},"(current)"))):""),N()?r.a.createElement(r.a.Fragment,null,r.a.createElement(l.b,{exact:"true",to:"/profile"},r.a.createElement("img",{src:this.state.photo?this.state.photo:"https://avatars2.githubusercontent.com/u/12019320?s=460&u=d0e2bdf1be105ea016322ed761da2e195a8d3217&v=4",className:"comment-round-image"})),"\xa0\xa0\xa0\xa0\xa0\xa0\xa0",r.a.createElement("button",{onClick:this.logOut,className:"btn btn-outline-primary my-2 my-sm-0"},"Logout")):"")))}}]),a}(n.Component),A=Object(s.g)(O),U=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row justify-content-center align-items-center custom-class"},r.a.createElement("div",{className:"col-12 text-center"},r.a.createElement("h2",null,"Oops! I believe you are in a wrong place. Don't worry"),r.a.createElement("br",null),r.a.createElement("div",null,r.a.createElement(l.b,{to:"/"},r.a.createElement("button",{className:"btn btn-primary"},"Go Home"))))))}}]),a}(n.Component),B=a(37);a(68);var D=function(){var e=Object(B.a)();return r.a.createElement(l.a,{history:e},r.a.createElement(A,null),r.a.createElement(s.d,null,r.a.createElement(s.b,{exact:!0,path:"/login",component:S}),r.a.createElement(s.b,{exact:!0,path:"/register",component:I}),r.a.createElement(x,{exact:!0,path:"/profile",component:j}),r.a.createElement(x,{exact:!0,path:"/",component:C}),r.a.createElement(s.b,{component:U})),r.a.createElement(w.a,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(D,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[39,1,2]]]);
//# sourceMappingURL=main.9a95a0a3.chunk.js.map